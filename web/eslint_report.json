[{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\aws-exports.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\AcceptRequestPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\AnalyticsCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\AudienceInterface.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\DJLibrary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\DarkModeTheme.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\ErrorDisplay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\EventCreator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\EventPlaylistManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\LiveModeIndicators.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\LoadingSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\MarkPlayingPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\Notifications.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\NowPlayingCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\OfflineIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\OrbitalInterface.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\PaymentAccess.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\PaymentHistory.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\PaymentPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\PayoutDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\ProfileManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\QRCodeDisplay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\QueueTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\RefundConfirmation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\RequestCapManager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\RequestConfirmation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\Settings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\SocialLoginButtons.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\SongSearchModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\SpotifyPlaylistImport.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\SpotifySearch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\StatusIndicators.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\StatusModals.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\ThemeSwitcher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\TierBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\UndoToast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\UniversalHelp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\VetoConfirmation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\YocoCardInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\CircularQueueVisualizer\\CircularQueueVisualizer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\CircularQueueVisualizer\\RequestCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\CircularQueueVisualizer\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\CircularQueueVisualizer\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\CircularQueueVisualizer\\useRequestSwipe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\CircularQueueVisualizer\\useResponsiveOrbit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\FloatingActionBubble\\FloatingActionBubble.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\FloatingActionBubble\\RadialMenuItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\FloatingActionBubble\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\FloatingActionBubble\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\FloatingActionBubble\\useDraggable.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\GestureHandler\\DirectionArrow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\GestureHandler\\GestureHandler.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\GestureHandler\\PeekPreview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\GestureHandler\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\GestureHandler\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\GestureHandler\\usePeekPreview.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\GestureHandler\\useSwipeDetection.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\StatusArc\\Counter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\StatusArc\\StatusArc.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\StatusArc\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\StatusArc\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\core\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\effects\\CelebrationEffect.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\effects\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\errors\\ComponentErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\errors\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\errors\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\modals\\RequestDetailsModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\modals\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\ui\\LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\components\\ui\\RequestBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\config\\amplify.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\config\\aws-exports.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\config\\spotify.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\context\\AuthContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\context\\BackendContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\context\\NotificationContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\context\\ThemeContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\hooks\\useAnimatedCounter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\hooks\\useEvent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\hooks\\useHapticFeedback.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\hooks\\useLocalStorage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\hooks\\useOfflineQueue.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\hooks\\usePerformanceMonitor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\hooks\\useQueue.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\hooks\\useQueueSubscription.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\hooks\\useSnapToEdge.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\hooks\\useTracklist.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\pages\\DJPortalOrbital.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\pages\\ForgotPassword.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\pages\\Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\pages\\PeekPreviewTest.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\pages\\UserPortalInnovative.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Palette' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":105,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":112},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Crown' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":114,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":119},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Gem' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":121,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":124}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * User Portal - Innovative Event Companion\n * Revolutionary audience experience with gesture-first design\n * Phase 8: Performance - Added lazy loading for non-critical components\n */\n\nimport React, { useState, useEffect, useRef, lazy, Suspense } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useEvent } from '../hooks/useEvent';\nimport { useQueue } from '../hooks/useQueue';\nimport { useTracklist } from '../hooks/useTracklist';\nimport { useNotifications } from '../context/NotificationContext';\nimport { useQueueSubscription } from '../hooks/useQueueSubscription';\nimport { useTheme, useThemeClasses } from '../context/ThemeContext';\nimport {\n  EventDiscovery,\n  AlbumArtGrid,\n  MassiveRequestButton,\n  LockedInAnimation,\n  NowPlayingCelebration,\n} from '../components/AudienceInterface';\nimport { GestureHandler } from '../components/OrbitalInterface';\nimport { QueueTracker } from '../components/QueueTracker';\nimport { EmptyState } from '../components/EmptyState';\nimport { EventCardSkeleton, SongCardSkeleton, LoadingState } from '../components/LoadingSkeleton';\nimport { LogOut, User, Star, ArrowLeft, Bell, Calendar, Music, Settings as SettingsIcon, AlertTriangle, Palette, Crown, Gem } from 'lucide-react';\nimport { createPaymentIntent, processYocoPayment, isRetryableError } from '../services/payment';\nimport { submitRequestWithPaymentVerification, fetchUserActiveRequests, fetchDJSet } from '../services/graphql';\nimport { requestRateLimiter } from '../services/rateLimiter';\nimport { BusinessMetrics } from '../services/analytics';\n\n// Phase 8: Lazy-loaded components (modals, heavy UI)\nconst RefundConfirmation = lazy(() => import('../components/RefundConfirmation').then(m => ({ default: m.RefundConfirmation })));\nconst RequestConfirmation = lazy(() => import('../components/RequestConfirmation').then(m => ({ default: m.RequestConfirmation })));\nconst NotificationCenter = lazy(() => import('../components/Notifications').then(m => ({ default: m.NotificationCenter })));\nconst UserNowPlayingNotification = lazy(() => import('../components/LiveModeIndicators').then(m => ({ default: m.UserNowPlayingNotification })));\nconst PaymentErrorModal = lazy(() => import('../components/StatusModals').then(m => ({ default: m.PaymentErrorModal })));\nconst SuccessConfirmation = lazy(() => import('../components/StatusModals').then(m => ({ default: m.SuccessConfirmation })));\nconst Settings = lazy(() => import('../components/Settings').then(m => ({ default: m.Settings })));\n\ninterface Song {\n  id: string;\n  title: string;\n  artist: string;\n  genre: string;\n  basePrice: number;\n  albumArt?: string;\n}\n\ntype ViewState = 'discovery' | 'lineup' | 'browsing' | 'requesting' | 'waiting' | 'playing';\n\nexport const UserPortalInnovative: React.FC = () => {\n  const { user, logout } = useAuth();\n  const { currentTheme } = useTheme();\n  const themeClasses = useThemeClasses();\n  const [viewState, setViewState] = useState<ViewState>('discovery');\n  const [currentEventId, setCurrentEventId] = useState<string | null>(null);\n  const [currentSetId, setCurrentSetId] = useState<string | null>(null);\n  const [djSets, setDjSets] = useState<any[]>([]);\n  const [selectedSong, setSelectedSong] = useState<Song | null>(null);\n  const [showLockedIn, setShowLockedIn] = useState(false);\n  const [myRequestPosition, setMyRequestPosition] = useState<number | null>(null);\n  const [showNowPlaying, setShowNowPlaying] = useState(false);\n  const [showUserPlayingNotification, setShowUserPlayingNotification] = useState(false);\n  const [userPlayingData, setUserPlayingData] = useState<any>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [paymentError, setPaymentError] = useState<string | null>(null);\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n  const [successQueuePosition, setSuccessQueuePosition] = useState<number | null>(null);\n\n  // Feature 6: Refund modal state\n  const [showRefundModal, setShowRefundModal] = useState(false);\n  const [refundData, setRefundData] = useState<any>(null);\n\n  // Phase 3: Notification features\n  const { notifications, unreadCount, addNotification, markAsRead, clearNotification } = useNotifications();\n  const [showNotifications, setShowNotifications] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n\n  // Phase 3: Real-time queue subscription\n  const { queueData, connectionStatus } = useQueueSubscription(\n    currentSetId || '',\n    currentEventId || ''\n  );\n\n  // Notification throttle tracking (memory-only)\n  const lastNotificationTime = useRef<Record<string, number>>({});\n\n  // Helper: Throttle notifications (max 1 per type per 5 seconds)\n  const shouldShowNotification = (type: string): boolean => {\n    const now = Date.now();\n    const lastTime = lastNotificationTime.current[type] || 0;\n    const timeSinceLastNotification = now - lastTime;\n\n    if (timeSinceLastNotification < 5000) {\n      console.log(`Throttling notification type: ${type} (${timeSinceLastNotification}ms since last)`);\n      return false;\n    }\n\n    lastNotificationTime.current[type] = now;\n    return true;\n  };\n\n  // Handle real-time queue updates\n  useEffect(() => {\n    if (!queueData || !user?.userId) return;\n\n    // Find user's request in queue\n    const myRequest = queueData.orderedRequests.find(req =>\n      req.requestId.includes(user.userId)\n    );\n\n    if (myRequest && myRequest.queuePosition) {\n      const position = myRequest.queuePosition;\n      setMyRequestPosition(position);\n\n      // Notifications with throttling\n      if (position === 1 && shouldShowNotification('now_playing')) {\n        // Show user playing notification\n        setUserPlayingData({\n          userName: user.name || 'User',\n          songTitle: myRequest.songTitle || 'Your Song',\n          artistName: myRequest.artist || 'Unknown Artist',\n          djName: 'DJ',\n          venueName: currentEvent?.venueName || 'Event',\n          timestamp: Date.now(),\n        });\n        setShowUserPlayingNotification(true);\n\n        addNotification({\n          type: 'now_playing',\n          title: '≡ƒÄ╢ Your Song is Playing NOW!',\n          message: `${myRequest.songTitle || 'Your request'} is playing!`,\n          metadata: {\n            requestId: myRequest.requestId,\n            songTitle: myRequest.songTitle,\n          }\n        });\n      } else if (position === 2 && shouldShowNotification('coming_up')) {\n        addNotification({\n          type: 'coming_up',\n          title: '≡ƒö£ Your Song is Next!',\n          message: `${myRequest.songTitle || 'Your request'} will play soon!`,\n          metadata: {\n            requestId: myRequest.requestId,\n            songTitle: myRequest.songTitle,\n          }\n        });\n      } else if (position <= 5 && position > 2 && shouldShowNotification('queue_update')) {\n        addNotification({\n          type: 'queue_update',\n          title: `≡ƒôè Position #${position}`,\n          message: `${myRequest.songTitle || 'Your request'} is moving up!`,\n          metadata: {\n            requestId: myRequest.requestId,\n            songTitle: myRequest.songTitle,\n          }\n        });\n      }\n    }\n  }, [queueData, user?.userId, shouldShowNotification, addNotification]);\n\n  // Fetch real data\n  const { event: currentEvent, loading: eventLoading, error: eventError } = useEvent(currentEventId);\n  const { queue } = useQueue(currentSetId);\n  const { tracklist, loading: tracklistLoading } = useTracklist(currentEventId);\n\n  // Fetch active events from backend\n  const [events, setEvents] = useState<any[]>([]);\n  const [eventsLoading, setEventsLoading] = useState(true);\n  const [eventsError, setEventsError] = useState<string | null>(null);\n  const [performerNames, setPerformerNames] = useState<Record<string, string>>({});\n  const [userLocation, setUserLocation] = useState<{ latitude: number; longitude: number } | null>(null);\n\n  // Helper: Request user's location for distance calculation\n  useEffect(() => {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setUserLocation({\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude,\n          });\n          console.log('≡ƒôì User location acquired:', position.coords.latitude, position.coords.longitude);\n        },\n        (error) => {\n          console.warn('ΓÜá∩╕Å Geolocation permission denied or unavailable:', error);\n          // Continue without location - will show \"Nearby\" instead of distance\n        }\n      );\n    }\n  }, []);\n\n  // Helper: Calculate distance between two coordinates (Haversine formula)\n  const calculateDistance = (\n    lat1: number,\n    lon1: number,\n    lat2: number,\n    lon2: number\n  ): number => {\n    const R = 6371; // Earth's radius in kilometers\n    const dLat = (lat2 - lat1) * (Math.PI / 180);\n    const dLon = (lon2 - lon1) * (Math.PI / 180);\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(lat1 * (Math.PI / 180)) *\n      Math.cos(lat2 * (Math.PI / 180)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c;\n    return distance;\n  };\n\n  // Helper: Format distance string\n  const formatDistance = (distanceKm: number): string => {\n    if (distanceKm < 1) {\n      return `${Math.round(distanceKm * 1000)}m away`;\n    } else if (distanceKm < 10) {\n      return `${distanceKm.toFixed(1)} km away`;\n    } else {\n      return `${Math.round(distanceKm)} km away`;\n    }\n  };\n\n  // Helper: Fetch performer name by userId\n  const fetchPerformerName = async (userId: string): Promise<string> => {\n    // Check cache first\n    if (performerNames[userId]) {\n      return performerNames[userId];\n    }\n\n    try {\n      const { generateClient } = await import('aws-amplify/api');\n      const client = generateClient({ authMode: 'userPool' });\n\n      const response: any = await client.graphql({\n        query: `\n          query GetUser($userId: ID!) {\n            getUser(userId: $userId) {\n              userId\n              name\n              email\n            }\n          }\n        `,\n        variables: { userId }\n      });\n\n      const userName = response.data?.getUser?.name || 'DJ';\n\n      // Update cache\n      setPerformerNames(prev => ({ ...prev, [userId]: userName }));\n\n      return userName;\n    } catch (error) {\n      console.warn(`Failed to fetch performer name for ${userId}:`, error);\n      return 'DJ'; // Fallback\n    }\n  };\n\n  const fetchAttendeeCount = async (eventId: string): Promise<number> => {\n    try {\n      const { generateClient } = await import('aws-amplify/api');\n      const client = generateClient({ authMode: 'userPool' });\n\n      const setsResponse: any = await client.graphql({\n        query: `\n          query ListEventDJSets($eventId: ID!) {\n            listEventDJSets(eventId: $eventId) {\n              setId\n            }\n          }\n        `,\n        variables: { eventId }\n      });\n\n      const sets = setsResponse.data?.listEventDJSets || [];\n      if (sets.length === 0) return 0;\n\n      const allUserNames = new Set<string>();\n\n      for (const set of sets) {\n        try {\n          const queueResponse: any = await client.graphql({\n            query: `\n              query GetQueue($setId: ID!) {\n                getQueue(setId: $setId) {\n                  orderedRequests {\n                    userName\n                  }\n                }\n              }\n            `,\n            variables: { setId: set.setId }\n          });\n\n          const requests = queueResponse.data?.getQueue?.orderedRequests || [];\n          requests.forEach((r: any) => {\n            if (r.userName) allUserNames.add(r.userName);\n          });\n        } catch (err) {\n          console.warn(`Failed to fetch queue for set ${set.setId}:`, err);\n        }\n      }\n\n      return allUserNames.size;\n    } catch (error) {\n      console.warn(`Failed to fetch attendee count for event ${eventId}:`, error);\n      return 0;\n    }\n  };\n\n  useEffect(() => {\n    const fetchActiveEvents = async () => {\n      try {\n        setEventsLoading(true);\n        setEventsError(null);\n        console.log('≡ƒöì Fetching active events from backend...');\n\n        // Check authentication status before making request\n        try {\n          const { getCurrentUser, fetchAuthSession } = await import('aws-amplify/auth');\n          const currentUser = await getCurrentUser();\n          const session = await fetchAuthSession();\n\n          console.log('Γ£à User authenticated:', currentUser.userId);\n          console.log('Γ£à Session tokens present:', {\n            idToken: !!session.tokens?.idToken,\n            accessToken: !!session.tokens?.accessToken,\n          });\n\n          if (!session.tokens?.idToken) {\n            throw new Error('No authentication token available. Please sign out and sign back in.');\n          }\n        } catch (authError: any) {\n          console.error('Γ¥î Authentication check failed:', authError);\n          throw new Error('Not authenticated. Please sign in to view events.');\n        }\n\n        const { generateClient } = await import('aws-amplify/api');\n        const client = generateClient({\n          authMode: 'userPool'\n        });\n\n        const response: any = await client.graphql({\n          query: `\n            query ListActiveEvents {\n              listActiveEvents {\n                items {\n                  eventId\n                  venueName\n                  venueLocation {\n                    address\n                    city\n                    province\n                    coordinates {\n                      lat\n                      lng\n                    }\n                  }\n                  startTime\n                  endTime\n                  status\n                  createdBy\n                }\n              }\n            }\n          `\n        });\n\n        console.log('Γ£à Events fetched:', response.data.listActiveEvents);\n\n        // Handle connection response (deployed schema returns { items: [], nextToken: null })\n        const rawEvents = response.data.listActiveEvents?.items || [];\n\n        // Transform events and fetch performer names, attendee counts, and calculate distances\n        const transformedEvents = await Promise.all(\n          rawEvents.map(async (event: any) => {\n            // Fetch DJ name asynchronously\n            const djName = event.createdBy ? await fetchPerformerName(event.createdBy) : 'DJ';\n\n            // Fetch attendee count asynchronously\n            const attendees = await fetchAttendeeCount(event.eventId);\n\n            // Calculate distance if user location and venue location are available\n            let distance = 'Nearby';\n            if (userLocation && event.venueLocation?.coordinates?.lat && event.venueLocation?.coordinates?.lng) {\n              const distanceKm = calculateDistance(\n                userLocation.latitude,\n                userLocation.longitude,\n                event.venueLocation.coordinates.lat,\n                event.venueLocation.coordinates.lng\n              );\n              distance = formatDistance(distanceKm);\n            } else if (event.venueLocation?.city) {\n              distance = event.venueLocation.city; // Show city if no coordinates\n            }\n\n            return {\n              id: event.eventId,\n              eventId: event.eventId,\n              venueName: event.venueName,\n              venueLocation: event.venueLocation,\n              performerId: event.createdBy,\n              djName, // Now shows real performer name!\n              startTime: event.startTime,\n              endTime: event.endTime,\n              status: event.status,\n              genre: 'All Genres', // TODO: Get from event settings\n              attendees, // Now shows real attendee count!\n              distance, // Now shows real distance or city!\n              image: null, // TODO: Get venue/DJ image\n            };\n          })\n        );\n\n        console.log('≡ƒôï Transformed events with DJ names, attendees, and distances:', transformedEvents);\n\n        setEvents(transformedEvents);\n      } catch (error: any) {\n        console.error('Γ¥î Failed to fetch events:', error);\n        console.error('Error details:', {\n          message: error.message,\n          errors: error.errors,\n          name: error.name,\n          statusCode: error.$metadata?.httpStatusCode\n        });\n\n        // Log the actual GraphQL errors with full details\n        if (error.errors && error.errors.length > 0) {\n          console.error('GraphQL Errors:');\n          error.errors.forEach((err: any, index: number) => {\n            console.error(`  Error ${index + 1}:`, err.message);\n          });\n        }\n\n        // Set user-friendly error message\n        let errorMessage = 'Failed to load events. ';\n\n        if (error.message?.includes('Not authenticated')) {\n          errorMessage = 'Please sign in to view events.';\n          setEventsError(errorMessage);\n          return;\n        }\n\n        if (error.errors && error.errors.length > 0) {\n          const firstError = error.errors[0];\n          console.error('First error message:', firstError.message);\n          console.error('First error type:', firstError.errorType);\n\n          if (firstError.message?.includes('Not Authorized') ||\n            firstError.message?.includes('Unauthorized') ||\n            firstError.errorType === 'Unauthorized') {\n            errorMessage = '≡ƒöÉ Authentication issue detected. This usually happens when:\\n\\n' +\n              '1. Your session has expired\\n' +\n              '2. You need to sign out and sign back in\\n' +\n              '3. The authentication token is not being sent correctly\\n\\n' +\n              'Please try signing out and signing back in. If the problem persists, check the browser console for more details.';\n          } else if (firstError.message?.includes('Cannot return null') || firstError.message?.includes('resolver')) {\n            errorMessage = 'Backend API not fully configured. Using demo mode.';\n            // Don't show error to user, just use empty state\n            setEvents([]);\n            setEventsError(null);\n            return; // Exit early, don't set error\n          } else if (firstError.message?.includes('FieldUndefined') || firstError.message?.includes('Validation error')) {\n            errorMessage = 'Schema mismatch detected. Using demo mode.';\n            // Schema needs redeployment, use empty state\n            setEvents([]);\n            setEventsError(null);\n            return; // Exit early\n          } else {\n            errorMessage = `GraphQL Error: ${firstError.message}`;\n          }\n        } else if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {\n          errorMessage = '≡ƒöÉ Authentication error (401). Please sign out and sign back in.';\n        } else if (error.message) {\n          errorMessage = `Error: ${error.message}`;\n        }\n\n        setEventsError(errorMessage);\n        setEvents([]);\n      } finally {\n        setEventsLoading(false);\n      }\n    };\n\n    fetchActiveEvents();\n  }, []);\n\n  // Fetch DJ sets when event is selected\n  useEffect(() => {\n    const fetchDJSets = async () => {\n      if (!currentEventId) {\n        setDjSets([]);\n        return;\n      }\n\n      try {\n        console.log('≡ƒÄ╡ Fetching DJ sets for event:', currentEventId);\n\n        const { generateClient } = await import('aws-amplify/api');\n        const client = generateClient({\n          authMode: 'userPool'\n        });\n\n        const response: any = await client.graphql({\n          query: `\n            query ListEventDJSets($eventId: ID!) {\n              listEventDJSets(eventId: $eventId) {\n                setId\n                eventId\n                performerId\n                setStartTime\n                setEndTime\n                status\n                isAcceptingRequests\n                settings {\n                  basePrice\n                  requestCapPerHour\n                }\n              }\n            }\n          `,\n          variables: { eventId: currentEventId }\n        });\n\n        const sets = response.data.listEventDJSets || [];\n        console.log('Γ£à DJ sets fetched:', sets);\n        setDjSets(sets);\n\n        // If there's only one set, auto-select it\n        if (sets.length === 1) {\n          setCurrentSetId(sets[0].setId);\n          setViewState('browsing');\n        } else if (sets.length > 1) {\n          setViewState('lineup');\n        } else {\n          // No DJ sets found - proceed to browsing with eventId as setId\n          console.log('ΓÜá∩╕Å No DJ sets found, using event as default set');\n          setCurrentSetId(currentEventId);\n          setViewState('browsing');\n        }\n      } catch (error: any) {\n        console.error('Γ¥î Failed to fetch DJ sets:', error);\n        console.warn('ΓÜá∩╕Å DJ Sets feature not available - schema not deployed');\n\n        // Check if this is a schema error\n        if (error.errors && error.errors.length > 0) {\n          const firstError = error.errors[0];\n          if (firstError.message?.includes('Cannot query field') || firstError.message?.includes('listEventDJSets')) {\n            console.warn('≡ƒôï Deployed schema is missing DJ Sets queries. For now, assuming single set and proceeding to browsing...');\n            // Fallback: assume event has one default set\n            setCurrentSetId(currentEventId); // Use eventId as temporary setId\n            setViewState('browsing');\n            return;\n          }\n        }\n\n        setDjSets([]);\n      }\n    };\n\n    fetchDJSets();\n  }, [currentEventId]);\n\n  // Reset to discovery if event fails to load\n  useEffect(() => {\n    // Only check if event load failed (not just still loading)\n    if (!currentEventId) return; // No event selected\n    if (eventLoading) return; // Still loading, wait\n\n    // Check if we got an error OR if event is null after loading\n    // Only redirect if we actually have an error (not just null data)\n    if (eventError && !currentEvent) {\n      console.log('ΓÜá∩╕Å Event not found after loading completed, returning to discovery');\n      console.log('  - eventId:', currentEventId);\n      console.log('  - eventLoading:', eventLoading);\n      console.log('  - eventError:', eventError);\n      console.log('  - currentEvent:', currentEvent);\n\n      setCurrentEventId(null);\n      setCurrentSetId(null);\n      setViewState('discovery');\n    }\n  }, [currentEvent, currentEventId, eventLoading, eventError]);\n\n  // Check if user's song is playing\n  useEffect(() => {\n    if (queue?.orderedRequests && myRequestPosition === 1) {\n      setShowNowPlaying(true);\n      setViewState('playing');\n    }\n  }, [queue, myRequestPosition]);\n\n  // Load user's active requests on mount (queue position persistence)\n  useEffect(() => {\n    const loadMyRequests = async () => {\n      if (!user?.userId || !currentEventId) return;\n\n      try {\n        const activeRequests = await fetchUserActiveRequests(user.userId, currentEventId);\n\n        if (activeRequests && activeRequests.length > 0) {\n          const activeRequest = activeRequests[0]; // Get most recent active request\n\n          setMyRequestPosition(activeRequest.queuePosition || null);\n          setSelectedSong({\n            id: activeRequest.songId,\n            title: activeRequest.songTitle,\n            artist: activeRequest.artistName,\n            genre: '', // Not returned from query\n            basePrice: activeRequest.price || 0,\n          });\n\n          // Set appropriate view state\n          if (activeRequest.queuePosition === 1) {\n            setViewState('playing');\n          } else if (activeRequest.status === 'PENDING' || activeRequest.status === 'ACCEPTED') {\n            setViewState('waiting');\n          }\n\n          console.log('Γ£à Loaded active request:', activeRequest);\n        }\n      } catch (error: any) {\n        console.error('Failed to load active requests:', error);\n\n        // Check if it's a schema error\n        const isSchemaError = error.errors?.some((e: any) =>\n          e.message?.includes('Cannot query field') ||\n          e.message?.includes('getUserActiveRequests')\n        );\n\n        if (isSchemaError) {\n          console.warn('ΓÜá∩╕Å Active requests feature not available - schema not deployed');\n        }\n        // Don't show error to user - just continue normally\n      }\n    };\n\n    loadMyRequests();\n  }, [user?.userId, currentEventId]);\n\n  // Feature 6: Subscribe to request status updates (for refunds)\n  // TODO: Re-enable after fixing subscription infinite loop issue\n  // useEffect(() => {\n  //   if (!user?.userId) return;\n  //   // Subscription code here\n  // }, [user?.userId]);\n\n  const handleSelectEvent = (eventId: string) => {\n    setCurrentEventId(eventId);\n    // viewState will be set by useEffect based on number of DJ sets\n  };\n\n  const handleSelectDJSet = (setId: string) => {\n    setCurrentSetId(setId);\n    setViewState('browsing');\n  };\n\n  const handleSelectSong = async (song: Song) => {\n    // Rate limiting check\n    if (!requestRateLimiter.tryConsume(user?.userId || 'anon')) {\n      const remaining = requestRateLimiter.getResetTime(user?.userId || 'anon');\n      const seconds = Math.ceil(remaining / 1000);\n      addNotification({\n        type: 'error',\n        title: 'ΓÅ▒∩╕Å Too Many Requests',\n        message: `Please wait ${seconds} seconds before trying again.`,\n      });\n      return;\n    }\n\n    // Check for duplicate requests\n    const existingRequest = queue?.orderedRequests?.find(\n      (req: any) =>\n        req.songTitle === song.title &&\n        req.artistName === song.artist &&\n        req.userId === user?.userId\n    );\n\n    if (existingRequest) {\n      addNotification({\n        type: 'error',\n        title: '≡ƒöü Already Requested',\n        message: 'You already requested this song!',\n      });\n      return;\n    }\n\n    // Check user's active request limit (max 3)\n    const userActiveRequests = queue?.orderedRequests?.filter(\n      (req: any) => req.userId === user?.userId && req.status === 'PENDING'\n    ).length || 0;\n\n    if (userActiveRequests >= 3) {\n      addNotification({\n        type: 'error',\n        title: '≡ƒÜ½ Request Limit Reached',\n        message: 'Maximum 3 active requests allowed',\n      });\n      return;\n    }\n\n    // Check DJ set capacity\n    if (currentSetId) {\n      try {\n        const djSet = await fetchDJSet(currentSetId);\n\n        // Check if sold out\n        if (djSet.settings?.isSoldOut) {\n          addNotification({\n            type: 'error',\n            title: '≡ƒÜ½ Sold Out',\n            message: 'Request queue is currently full. Try again later!',\n          });\n          return;\n        }\n\n        // Check request cap (requests in last hour)\n        const oneHourAgo = Date.now() - (60 * 60 * 1000);\n        const requestsThisHour = queue?.orderedRequests?.filter((req: any) => {\n          return req.timestamp > oneHourAgo;\n        }).length || 0;\n\n        if (djSet.settings?.requestCapPerHour && requestsThisHour >= djSet.settings.requestCapPerHour) {\n          addNotification({\n            type: 'error',\n            title: 'ΓÅ░ Hourly Cap Reached',\n            message: 'Hourly request cap reached. Try again in a few minutes!',\n          });\n          return;\n        }\n      } catch (error) {\n        console.error('Failed to check DJ set settings:', error);\n        // Don't block user if check fails\n      }\n    }\n\n    setSelectedSong(song);\n    setViewState('requesting');\n  };\n\n  const handleCancelRequest = () => {\n    setSelectedSong(null);\n    setViewState('browsing');\n  };\n\n  const songs: Song[] = tracklist.map(t => ({\n    id: t.id,\n    title: t.title,\n    artist: t.artist,\n    genre: t.genre,\n    basePrice: t.basePrice,\n  }));\n\n  // Gesture navigation handlers\n  const handleSwipeLeft = () => {\n    // Navigate to next view (right)\n    if (viewState === 'discovery' && currentEventId) {\n      setViewState('browsing');\n    } else if (viewState === 'browsing') {\n      setShowNotifications(true);\n    }\n  };\n\n  const handleSwipeRight = () => {\n    // Navigate to previous view (left)\n    if (viewState === 'browsing') {\n      setViewState('discovery');\n      setCurrentEventId(null);\n      setCurrentSetId(null);\n    } else if (viewState === 'requesting') {\n      handleCancelRequest();\n    } else if (viewState === 'waiting') {\n      setViewState('browsing');\n    }\n  };\n\n  const handleSwipeUp = () => {\n    // Could open notifications or settings\n    if (viewState !== 'discovery') {\n      setShowNotifications(true);\n    }\n  };\n\n  const handleSwipeDown = () => {\n    // Close overlays or go back\n    if (showNotifications) {\n      setShowNotifications(false);\n    } else if (showSettings) {\n      setShowSettings(false);\n    }\n  };\n\n  // Peek content previews for gesture navigation\n  const peekContent = {\n    left: viewState === 'discovery' && currentEventId ? (\n      <div className=\"h-full flex items-center justify-center p-8\">\n        <div className=\"text-center\">\n          <Music className=\"w-20 h-20 text-purple-400 mx-auto mb-4\" />\n          <h3 className=\"text-white text-2xl font-bold\">Browse Songs</h3>\n          <p className=\"text-gray-400 mt-2\">Swipe to see DJ's library</p>\n        </div>\n      </div>\n    ) : viewState === 'browsing' ? (\n      <div className=\"h-full flex items-center justify-center p-8\">\n        <div className=\"text-center\">\n          <Bell className=\"w-20 h-20 text-purple-400 mx-auto mb-4\" />\n          <h3 className=\"text-white text-2xl font-bold\">Notifications</h3>\n          <p className=\"text-gray-400 mt-2\">Check your alerts</p>\n        </div>\n      </div>\n    ) : null,\n    right: viewState === 'browsing' ? (\n      <div className=\"h-full flex items-center justify-center p-8\">\n        <div className=\"text-center\">\n          <Calendar className=\"w-20 h-20 text-purple-400 mx-auto mb-4\" />\n          <h3 className=\"text-white text-2xl font-bold\">Events</h3>\n          <p className=\"text-gray-400 mt-2\">Find nearby events</p>\n        </div>\n      </div>\n    ) : null,\n    up: (\n      <div className=\"h-full flex items-center justify-center p-8\">\n        <div className=\"text-center\">\n          <Bell className=\"w-20 h-20 text-yellow-400 mx-auto mb-4 animate-pulse\" />\n          <h3 className=\"text-white text-2xl font-bold\">Notifications</h3>\n          <p className=\"text-gray-400 mt-2\">{unreadCount > 0 ? `${unreadCount} unread` : 'All caught up!'}</p>\n        </div>\n      </div>\n    ),\n    down: null, // No preview for down swipe (usually closes things)\n  };\n\n  return (\n    <GestureHandler\n      onSwipeUp={handleSwipeUp}\n      onSwipeDown={handleSwipeDown}\n      onSwipeLeft={handleSwipeLeft}\n      onSwipeRight={handleSwipeRight}\n      peekContent={peekContent}\n    >\n      <div\n        className=\"absolute inset-0 h-dvh\"\n        style={{\n          background: currentTheme.primary ? `linear-gradient(135deg, #1e293b 0%, ${currentTheme.primary}80 50%, #1e293b 100%)` : 'linear-gradient(135deg, #1e293b 0%, #8b5cf6 50%, #1e293b 100%)'\n        }}\n      >\n        {/* Top Bar - Minimal */}\n        <div className=\"fixed top-0 left-0 right-0 z-50 bg-gray-900/30 backdrop-blur-lg border-b border-white/10 safe-area-top\">\n          <div className=\"max-w-7xl mx-auto px-4 py-2 sm:py-3 flex items-center justify-between\">\n            <div className=\"flex items-center gap-2 sm:gap-3 min-w-0\">\n              <div className={`w-8 h-8 sm:w-10 sm:h-10 rounded-full ${themeClasses.gradientPrimary} flex items-center justify-center flex-shrink-0`}>\n                <User className=\"w-4 h-4 sm:w-6 sm:h-6 text-white\" />\n              </div>\n              <div className=\"min-w-0\">\n                <p className=\"text-white font-semibold text-xs sm:text-sm truncate\">{user?.name || 'User'}</p>\n                <div className=\"flex items-center gap-1\">\n                  <Star className=\"w-2 h-2 sm:w-3 sm:h-3 text-yellow-400 flex-shrink-0\" />\n                  <span className=\"text-[10px] sm:text-xs text-yellow-400\">{user?.tier || 'BRONZE'}</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              {/* Notification Bell */}\n              <button\n                onClick={() => setShowNotifications(!showNotifications)}\n                className=\"relative p-1.5 sm:p-2 hover:bg-white/10 rounded-lg transition-colors flex-shrink-0\"\n                aria-label=\"Notifications\"\n              >\n                <Bell className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-400\" />\n                {unreadCount > 0 && (\n                  <span className=\"absolute -top-1 -right-1 w-4 h-4 sm:w-5 sm:h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center\">\n                    {unreadCount > 9 ? '9+' : unreadCount}\n                  </span>\n                )}\n              </button>\n\n              {/* Settings Button */}\n              <button\n                onClick={() => setShowSettings(true)}\n                className=\"p-1.5 sm:p-2 hover:bg-white/10 rounded-lg transition-colors flex-shrink-0\"\n                aria-label=\"Settings\"\n              >\n                <SettingsIcon className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-400\" />\n              </button>\n\n              {/* Logout Button */}\n              <button\n                onClick={logout}\n                className=\"p-1.5 sm:p-2 hover:bg-white/10 rounded-lg transition-colors flex-shrink-0\"\n                aria-label=\"Sign out\"\n              >\n                <LogOut className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-400\" />\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content - Phase 7: Added bottom padding for mobile nav */}\n        <div className=\"pt-16 h-full overflow-y-auto pb-0 sm:pb-0\" style={{ paddingBottom: 'max(80px, env(safe-area-inset-bottom))' }}>\n          {/* Event Discovery */}\n          {viewState === 'discovery' && (\n            <>\n              {eventsLoading ? (\n                <LoadingState message=\"Finding events near you...\">\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4 mt-8\">\n                    <EventCardSkeleton />\n                    <EventCardSkeleton />\n                    <EventCardSkeleton />\n                  </div>\n                </LoadingState>\n              ) : eventsError ? (\n                <EmptyState\n                  icon={AlertTriangle}\n                  title=\"Unable to Load Events\"\n                  message={eventsError}\n                  action={{\n                    label: \"Retry\",\n                    onClick: () => window.location.reload()\n                  }}\n                />\n              ) : events.length === 0 ? (\n                <EmptyState\n                  icon={Calendar}\n                  title=\"No Events Nearby\"\n                  message=\"Check back soon or try a different location. New events are added daily!\"\n                />\n              ) : (\n                <EventDiscovery\n                  events={events}\n                  onSelectEvent={handleSelectEvent}\n                />\n              )}\n            </>\n          )}\n\n          {/* DJ Lineup Selection */}\n          {viewState === 'lineup' && (\n            <div className=\"h-full p-4\">\n              <div className=\"max-w-4xl mx-auto\">\n                {/* Header */}\n                <div className=\"flex items-center gap-3 mb-6\">\n                  <button\n                    onClick={() => {\n                      setCurrentEventId(null);\n                      setCurrentSetId(null);\n                      setViewState('discovery');\n                    }}\n                    className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\n                  >\n                    <ArrowLeft className=\"w-5 h-5 text-gray-400\" />\n                  </button>\n                  <div>\n                    <h2 className=\"text-2xl sm:text-3xl font-bold text-white\">\n                      {currentEvent?.venueName || 'Event Lineup'}\n                    </h2>\n                    <p style={{ color: currentTheme.accent }}>Select a DJ to browse their library</p>\n                  </div>\n                </div>\n\n                {/* DJ Sets Grid */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {djSets\n                    .sort((a, b) => new Date(a.setStartTime).getTime() - new Date(b.setStartTime).getTime())\n                    .map((set) => {\n                      const startTime = new Date(set.setStartTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n                      const endTime = new Date(set.setEndTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n                      const isActive = set.status === 'ACTIVE';\n                      const isAccepting = set.isAcceptingRequests;\n\n                      return (\n                        <button\n                          key={set.setId}\n                          onClick={() => handleSelectDJSet(set.setId)}\n                          disabled={!isAccepting}\n                          className={`relative overflow-hidden rounded-2xl p-6 text-left transition-all transform hover:scale-105 ${isAccepting\n                            ? 'border-2 cursor-pointer'\n                            : 'bg-gray-800/30 border-2 border-gray-700/50 cursor-not-allowed opacity-60'\n                            }`}\n                          style={isAccepting ? {\n                            background: `linear-gradient(to bottom right, ${currentTheme.primary}33, ${currentTheme.secondary}33)`,\n                            borderColor: `${currentTheme.primary}80`,\n                          } : undefined}\n                          onMouseEnter={(e) => {\n                            if (isAccepting) {\n                              e.currentTarget.style.borderColor = `${currentTheme.primary}CC`;\n                            }\n                          }}\n                          onMouseLeave={(e) => {\n                            if (isAccepting) {\n                              e.currentTarget.style.borderColor = `${currentTheme.primary}80`;\n                            }\n                          }}\n                        >\n                          {/* Status Badge */}\n                          {isActive && (\n                            <div className=\"absolute top-4 right-4\">\n                              <div className=\"flex items-center gap-2 px-3 py-1 bg-green-500/20 rounded-full border border-green-500/50\">\n                                <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n                                <span className=\"text-green-400 text-xs font-semibold\">LIVE NOW</span>\n                              </div>\n                            </div>\n                          )}\n\n                          {/* Set Times */}\n                          <div className=\"mb-4\">\n                            <div className=\"text-sm mb-1\" style={{ color: currentTheme.accent }}>Set Time</div>\n                            <div className=\"text-white text-2xl font-bold\">\n                              {startTime} - {endTime}\n                            </div>\n                          </div>\n\n                          {/* DJ Info */}\n                          <div className=\"mb-4\">\n                            <div className=\"text-gray-400 text-sm mb-1 flex items-center gap-1\">\n                              <User className=\"w-4 h-4\" /> DJ\n                            </div>\n                            <div className=\"text-white text-lg font-semibold\">\n                              {set.performerId.substring(0, 8)}... {/* TODO: Fetch performer name */}\n                            </div>\n                          </div>\n\n                          {/* Pricing */}\n                          <div className=\"flex items-center justify-between\">\n                            <div>\n                              <div className=\"text-gray-400 text-xs\">Base Price</div>\n                              <div className=\"text-yellow-400 text-lg font-bold\">\n                                R{set.settings?.basePrice || 50}\n                              </div>\n                            </div>\n                            <div>\n                              <div className=\"text-gray-400 text-xs\">Requests/Hour</div>\n                              <div className=\"text-blue-400 text-lg font-bold\">\n                                {set.settings?.requestCapPerHour || 10}\n                              </div>\n                            </div>\n                          </div>\n\n                          {/* Status Message */}\n                          {!isAccepting && (\n                            <div className=\"mt-4 pt-4 border-t border-gray-700\">\n                              <p className=\"text-gray-400 text-sm\">\n                                {set.status === 'COMPLETED' ? (\n                                  <span className=\"flex items-center gap-1\"><CheckCircle className=\"w-3 h-3 text-green-400\" /> Set completed</span>\n                                ) : (\n                                  <span className=\"flex items-center gap-1\"><PauseCircle className=\"w-3 h-3 text-yellow-400\" /> Not accepting requests</span>\n                                )}\n                              </p>\n                            </div>\n                          )}\n                        </button>\n                      );\n                    })}\n                </div>\n\n                {/* No Sets Message */}\n                {djSets.length === 0 && (\n                  <div className=\"text-center py-12\">\n                    <div className=\"text-6xl mb-4\">≡ƒÄ╡</div>\n                    <p className=\"text-gray-400 text-xl mb-2\">No DJ sets scheduled</p>\n                    <p className=\"text-gray-500\">Check back later for the lineup</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Browsing Library */}\n          {viewState === 'browsing' && (\n            <div className=\"h-full pb-32\">\n              {currentEvent && (\n                <div className=\"bg-gray-900/50 backdrop-blur-lg p-3 sm:p-4 mb-4 sticky top-14 sm:top-16 z-40\">\n                  <div className=\"flex items-center gap-2 sm:gap-3 mb-2\">\n                    <button\n                      onClick={() => {\n                        if (djSets.length > 1) {\n                          setCurrentSetId(null);\n                          setViewState('lineup');\n                        } else {\n                          setCurrentEventId(null);\n                          setCurrentSetId(null);\n                          setViewState('discovery');\n                        }\n                      }}\n                      className=\"p-1.5 sm:p-2 hover:bg-white/10 rounded-lg transition-colors flex-shrink-0\"\n                      aria-label=\"Go back\"\n                    >\n                      <ArrowLeft className=\"w-4 h-4 sm:w-5 sm:h-5 text-gray-400\" />\n                    </button>\n                    <div className=\"min-w-0\">\n                      <h2 className=\"text-xl sm:text-2xl font-bold text-white truncate\">{currentEvent.venueName}</h2>\n                      <p className=\"text-sm sm:text-base\" style={{ color: currentTheme.accent }}>\n                        {selectedSong ? `Selected: ${selectedSong.title}` : 'Tap a song to request'}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {tracklistLoading ? (\n                <LoadingState message=\"Loading DJ's library...\">\n                  <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 p-4 mt-8\">\n                    <SongCardSkeleton />\n                    <SongCardSkeleton />\n                    <SongCardSkeleton />\n                    <SongCardSkeleton />\n                  </div>\n                </LoadingState>\n              ) : songs.length === 0 ? (\n                <EmptyState\n                  icon={Music}\n                  title=\"No Songs Available\"\n                  message=\"The DJ hasn't uploaded their tracklist yet. Check back soon!\"\n                  action={{\n                    label: \"Back to Events\",\n                    onClick: () => {\n                      setCurrentEventId(null);\n                      setCurrentSetId(null);\n                      setViewState('discovery');\n                    }\n                  }}\n                />\n              ) : (\n                <>\n                  <AlbumArtGrid\n                    songs={songs}\n                    onSelectSong={handleSelectSong}\n                    selectedSongId={selectedSong?.id}\n                  />\n\n                  <MassiveRequestButton\n                    onPress={() => {\n                      if (selectedSong) {\n                        setViewState('requesting');\n                      }\n                    }}\n                    disabled={!selectedSong}\n                    price={selectedSong?.basePrice || 20}\n                    selectedSong={selectedSong?.title}\n                  />\n                </>\n              )}\n            </div>\n          )}\n\n          {/* Request Confirmation - Enhanced Component - Phase 8: Lazy loaded */}\n          {viewState === 'requesting' && selectedSong && (\n            <Suspense fallback={<LoadingState message=\"Loading payment form...\" />}>\n              <RequestConfirmation\n                song={selectedSong}\n                userTier={user?.tier as 'BRONZE' | 'SILVER' | 'GOLD' | 'PLATINUM'}\n                estimatedQueuePosition={myRequestPosition || 8}\n                estimatedWaitTime={myRequestPosition ? `~${myRequestPosition * 3} minutes` : '~25 minutes'}\n                onConfirm={async (requestData) => {\n                  const handleConfirmRequest = async (retryCount = 0): Promise<void> => {\n                    const MAX_RETRIES = 3;\n                    setIsProcessing(true);\n                    setPaymentError(null);\n\n                    try {\n                      // CRITICAL FIX: Generate idempotency key to prevent double charges\n                      const idempotencyKey = crypto.randomUUID();\n                      console.log('≡ƒöæ Generated idempotency key:', idempotencyKey);\n\n                      console.log('≡ƒÆ│ Creating payment intent...');\n                      const paymentIntent = await createPaymentIntent({\n                        amount: selectedSong.basePrice,\n                        songId: selectedSong.id,\n                        eventId: currentEventId!,\n                        setId: currentSetId || undefined,\n                        userId: user?.userId,\n                        songTitle: selectedSong.title,\n                        artistName: selectedSong.artist,\n                      });\n\n                      // 2. Process payment via Yoco and get charge ID\n                      console.log('ΓÜí Processing payment...');\n                      const payment = await processYocoPayment(paymentIntent);\n\n                      if (payment.status !== 'succeeded' || !payment.chargeId) {\n                        throw new Error('Payment failed or charge ID not received');\n                      }\n\n                      console.log('Γ£à Payment succeeded, charge ID:', payment.chargeId);\n\n                      // 3. Submit request with payment verification (NEW SECURE FLOW)\n                      console.log('≡ƒôñ Submitting request with payment verification...');\n\n                      if (!user?.userId) {\n                        throw new Error('User ID not found');\n                      }\n\n                      const result = await submitRequestWithPaymentVerification({\n                        eventId: currentEventId!,\n                        setId: currentSetId || undefined,\n                        songTitle: selectedSong.title,\n                        artistName: selectedSong.artist,\n                        genre: selectedSong.genre || 'Unknown',\n                        requestType: requestData.requestType || 'STANDARD',\n                        dedication: requestData.dedication,\n                        shoutout: requestData.shoutout,\n                        yocoChargeId: payment.chargeId,\n                        idempotencyKey: idempotencyKey,\n                      });\n\n                      console.log('Γ£à Request submitted successfully:', result);\n\n                      // 4. Track successful request\n                      BusinessMetrics.requestSubmitted(\n                        selectedSong.title,\n                        selectedSong.basePrice,\n                        currentEventId!\n                      );\n                      BusinessMetrics.paymentProcessed(\n                        result.transaction.amount,\n                        result.transaction.transactionId\n                      );\n\n                      // 5. Show success modal with queue position\n                      setSuccessQueuePosition(result.request.queuePosition || 1);\n                      setShowSuccessModal(true);\n                      setMyRequestPosition(result.request.queuePosition || null);\n\n                      // 6. Add notification\n                      addNotification({\n                        type: 'info',\n                        title: '≡ƒÄ╡ Request Submitted!',\n                        message: `${selectedSong.title} added to queue at position ${result.request.queuePosition}`,\n                      });\n\n                    } catch (error: any) {\n                      console.error('Γ¥î Request submission failed:', error);\n\n                      // Handle specific error codes from backend\n                      let userMessage = error.message || 'Request failed. Please try again.';\n\n                      if (error.code) {\n                        switch (error.code) {\n                          case 'PAYMENT_VERIFICATION_FAILED':\n                            userMessage = 'Payment verification failed. Your payment will be refunded automatically.';\n                            break;\n                          case 'PAYMENT_ALREADY_USED':\n                            userMessage = 'This payment has already been used for another request.';\n                            break;\n                          case 'DUPLICATE_SONG':\n                            userMessage = 'You have already requested this song for this event.';\n                            break;\n                          case 'RATE_LIMIT_EXCEEDED':\n                            userMessage = 'You can only submit 3 requests per hour. Please try again later.';\n                            break;\n                          case 'CAPACITY_EXCEEDED':\n                            userMessage = 'This event has reached maximum capacity for requests.';\n                            break;\n                          case 'EVENT_NOT_ACTIVE':\n                            userMessage = 'This event is no longer accepting requests.';\n                            break;\n                          case 'QUEUE_UPDATE_FAILED':\n                            userMessage = 'Failed to add to queue. Your payment will be refunded.';\n                            break;\n                        }\n                      }\n\n                      // Retry logic for network errors only\n                      if (retryCount < MAX_RETRIES && isRetryableError(error)) {\n                        console.log(`≡ƒöä Retrying request (${retryCount + 1}/${MAX_RETRIES})...`);\n                        await new Promise(resolve => setTimeout(resolve, 1000 * Math.pow(2, retryCount)));\n                        return handleConfirmRequest(retryCount + 1);\n                      }\n\n                      // Show error to user\n                      setPaymentError(userMessage);\n                      addNotification({\n                        type: 'error',\n                        title: 'Γ¥î Request Failed',\n                        message: userMessage,\n                      });\n                    } finally {\n                      setIsProcessing(false);\n                    }\n                  };\n\n                  await handleConfirmRequest();\n                }}\n                onCancel={handleCancelRequest}\n              />\n            </Suspense>\n          )}\n\n          {/* Waiting in Queue - Enhanced Tracker */}\n          {viewState === 'waiting' && selectedSong && myRequestPosition && (\n            <QueueTracker\n              position={myRequestPosition}\n              totalInQueue={queue?.orderedRequests?.length || 10}\n              songTitle={selectedSong.title}\n              artistName={selectedSong.artist}\n              avgSongDuration={180} // 3 minutes average\n              onBrowseMore={() => setViewState('browsing')}\n            />\n          )}\n\n          {/* Now Playing Celebration */}\n          {showNowPlaying && selectedSong && (\n            <NowPlayingCelebration\n              songTitle={selectedSong.title}\n              artist={selectedSong.artist}\n              onDismiss={() => {\n                setShowNowPlaying(false);\n                setViewState('browsing');\n                setSelectedSong(null);\n                setMyRequestPosition(null);\n              }}\n            />\n          )}\n\n          {/* Locked In Animation */}\n          {showLockedIn && selectedSong && (\n            <LockedInAnimation\n              songTitle={selectedSong.title}\n              onComplete={() => setShowLockedIn(false)}\n            />\n          )}\n\n          {/* Feature 6: Refund Confirmation Modal - Phase 8: Lazy loaded */}\n          {showRefundModal && refundData && (\n            <Suspense fallback={<div className=\"fixed inset-0 bg-gray-900/50 z-50\" />}>\n              <RefundConfirmation\n                refund={{\n                  requestId: refundData.requestId || '',\n                  songTitle: refundData.songTitle || 'Unknown Song',\n                  artistName: refundData.artistName || 'Unknown Artist',\n                  albumArt: refundData.albumArt,\n                  venueName: currentEvent?.venueName || 'Event',\n                  eventDate: currentEvent?.startTime ? new Date(currentEvent.startTime).toLocaleDateString() : 'Today',\n                  originalAmount: refundData.refundAmount || 0,\n                  refundAmount: refundData.refundAmount || 0,\n                  paymentMethod: 'Card',\n                  paymentLast4: undefined,\n                  vetoReason: refundData.vetoReason,\n                  refundReferenceId: refundData.refundTransactionId || 'N/A',\n                  refundedAt: Date.now(),\n                  estimatedDays: '3-5 business days',\n                }}\n                onDismiss={() => {\n                  setShowRefundModal(false);\n                  setRefundData(null);\n                }}\n              />\n            </Suspense>\n          )}\n\n          {/* Phase 3: Notification Center Modal - Phase 8: Lazy loaded */}\n          {showNotifications && (\n            <div className=\"fixed inset-0 bg-gray-900/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n              <div className=\"max-w-2xl w-full max-h-[90vh]\">\n                <Suspense fallback={<LoadingState message=\"Loading notifications...\" />}>\n                  <NotificationCenter\n                    notifications={notifications}\n                    onMarkAsRead={markAsRead}\n                    onMarkAllAsRead={() => notifications.forEach(n => markAsRead(n.id))}\n                    onClearAll={() => notifications.forEach(n => clearNotification(n.id))}\n                    onNotificationClick={(notification) => {\n                      markAsRead(notification.id);\n                      // Handle navigation if needed\n                      if (notification.metadata?.requestId) {\n                        console.log('Navigate to request:', notification.metadata.requestId);\n                      }\n                    }}\n                    className=\"w-full\"\n                  />\n                </Suspense>\n                <button\n                  onClick={() => setShowNotifications(false)}\n                  className=\"mt-4 w-full py-3 bg-gray-800 hover:bg-gray-700 text-white rounded-xl font-semibold transition-colors\"\n                >\n                  Close\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* User Now Playing Notification - Phase 8: Lazy loaded */}\n          {showUserPlayingNotification && userPlayingData && (\n            <Suspense fallback={null}>\n              <UserNowPlayingNotification\n                userName={userPlayingData.userName}\n                songTitle={userPlayingData.songTitle}\n                artistName={userPlayingData.artistName}\n                djName={userPlayingData.djName}\n                venueName={userPlayingData.venueName}\n                timestamp={userPlayingData.timestamp}\n                onDismiss={() => {\n                  setShowUserPlayingNotification(false);\n                  setUserPlayingData(null);\n                }}\n              />\n            </Suspense>\n          )}\n\n          {/* Phase 3: Connection Status Indicator */}\n          {currentEventId && connectionStatus && (\n            <div className=\"fixed top-16 sm:top-20 right-4 z-40\">\n              <div\n                className={`flex items-center gap-2 px-3 py-2 rounded-full text-xs font-semibold shadow-lg ${connectionStatus === 'connected'\n                  ? 'bg-green-500/20 border border-green-500/50 text-green-400'\n                  : connectionStatus === 'connecting'\n                    ? 'bg-blue-500/20 border border-blue-500/50 text-blue-400'\n                    : connectionStatus === 'error'\n                      ? 'bg-yellow-500/20 border border-yellow-500/50 text-yellow-400'\n                      : 'bg-gray-500/20 border border-gray-500/50 text-gray-400'\n                  }`}\n              >\n                <div\n                  className={`w-2 h-2 rounded-full ${connectionStatus === 'connected'\n                    ? 'bg-green-400 animate-pulse'\n                    : connectionStatus === 'connecting'\n                      ? 'bg-blue-400 animate-pulse'\n                      : connectionStatus === 'error'\n                        ? 'bg-yellow-400'\n                        : 'bg-gray-400'\n                    }`}\n                />\n                <span>\n                  {connectionStatus === 'connected' && '≡ƒö┤ Live'}\n                  {connectionStatus === 'connecting' && 'ΓÅ│ Connecting'}\n                  {connectionStatus === 'error' && 'ΓÜá∩╕Å Reconnecting'}\n                  {connectionStatus === 'disconnected' && '≡ƒöä Updates'}\n                </span>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Payment Error Modal - Phase 8: Lazy loaded */}\n        {paymentError && (\n          <Suspense fallback={<div className=\"fixed inset-0 bg-gray-900/50 z-50\" />}>\n            <PaymentErrorModal\n              error={paymentError}\n              onRetry={() => {\n                setPaymentError(null);\n                // Re-trigger the request confirmation\n                if (selectedSong) {\n                  setViewState('requesting');\n                }\n              }}\n              onCancel={() => {\n                setPaymentError(null);\n                setViewState('browsing');\n              }}\n              isRetrying={isProcessing}\n            />\n          </Suspense>\n        )}\n\n        {/* Success Confirmation Modal - Phase 8: Lazy loaded */}\n        {showSuccessModal && selectedSong && successQueuePosition !== null && (\n          <Suspense fallback={<div className=\"fixed inset-0 bg-gray-900/50 z-50\" />}>\n            <SuccessConfirmation\n              songTitle={selectedSong.title}\n              artist={selectedSong.artist}\n              queuePosition={successQueuePosition}\n              onClose={() => {\n                setShowSuccessModal(false);\n                setSuccessQueuePosition(null);\n                setViewState('waiting');\n              }}\n            />\n          </Suspense>\n        )}\n\n        {/* Settings Modal - Phase 8: Lazy loaded */}\n        {showSettings && (\n          <Suspense fallback={<div className=\"fixed inset-0 bg-gray-900/50 z-50\" />}>\n            <Settings\n              onClose={() => setShowSettings(false)}\n              mode=\"fan\"\n            />\n          </Suspense>\n        )}\n\n        {/* Mobile Bottom Navigation - Phase 7 */}\n        <div className=\"fixed bottom-0 left-0 right-0 z-50 bg-gray-900/40 backdrop-blur-xl border-t border-white/10 pb-safe sm:hidden\">\n          <div className=\"grid grid-cols-4 gap-1 px-2 py-2\">\n            {/* Discover Events */}\n            <button\n              onClick={() => {\n                setViewState('discovery');\n                setCurrentEventId(null);\n              }}\n              className={`flex flex-col items-center justify-center py-2 px-1 rounded-lg transition-all min-h-[60px] ${viewState === 'discovery'\n                ? `${themeClasses.gradientPrimary} text-white shadow-lg`\n                : 'text-gray-400 hover:text-white hover:bg-white/10'\n                }`}\n            >\n              <Calendar className=\"w-5 h-5 mb-1\" />\n              <span className=\"text-[10px] font-medium\">Events</span>\n            </button>\n\n            {/* Browse Songs */}\n            <button\n              onClick={() => {\n                if (currentEventId) setViewState('browsing');\n              }}\n              disabled={!currentEventId}\n              className={`flex flex-col items-center justify-center py-2 px-1 rounded-lg transition-all min-h-[60px] ${viewState === 'browsing' || viewState === 'requesting'\n                ? `${themeClasses.gradientPrimary} text-white shadow-lg`\n                : currentEventId\n                  ? 'text-gray-400 hover:text-white hover:bg-white/10'\n                  : 'text-gray-600 opacity-50 cursor-not-allowed'\n                }`}\n            >\n              <Music className=\"w-5 h-5 mb-1\" />\n              <span className=\"text-[10px] font-medium\">Browse</span>\n            </button>\n\n            {/* Notifications */}\n            <button\n              onClick={() => setShowNotifications(true)}\n              className=\"flex flex-col items-center justify-center py-2 px-1 rounded-lg text-gray-400 hover:text-white hover:bg-white/10 transition-all min-h-[60px] relative\"\n            >\n              <Bell className=\"w-5 h-5 mb-1\" />\n              <span className=\"text-[10px] font-medium\">Alerts</span>\n              {unreadCount > 0 && (\n                <div className=\"absolute top-1 right-2 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center\">\n                  <span className=\"text-[8px] text-white font-bold\">{unreadCount > 9 ? '9+' : unreadCount}</span>\n                </div>\n              )}\n            </button>\n\n            {/* Settings */}\n            <button\n              onClick={() => setShowSettings(true)}\n              className=\"flex flex-col items-center justify-center py-2 px-1 rounded-lg text-gray-400 hover:text-white hover:bg-white/10 transition-all min-h-[60px]\"\n            >\n              <SettingsIcon className=\"w-5 h-5 mb-1\" />\n              <span className=\"text-[10px] font-medium\">Settings</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </GestureHandler>\n  );\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\pages\\YocoTestPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\analytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\djSettings.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\errorHandler.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\graphql.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\itunes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\notifications.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\payment.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":80,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":80,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":97,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":97,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Payment Service - Yoco Integration (Production Ready)\n * Handles payment processing, verification, and refunds via Yoco API\n */\n\nimport { generateClient } from 'aws-amplify/api';\n\nconst client = generateClient({\n  authMode: 'userPool'\n});\n\nconst YOCO_PUBLIC_KEY = import.meta.env.VITE_YOCO_PUBLIC_KEY || '';\n\ninterface PaymentIntentData {\n  amount: number;\n  songId: string;\n  eventId: string;\n  setId?: string;\n  performerId?: string;\n  userId?: string;\n  currency?: string;\n  songTitle?: string;\n  artistName?: string;\n}\n\ninterface PaymentIntent {\n  intentId: string;\n  amount: number;\n  currency: string;\n  status: 'pending' | 'processing' | 'succeeded' | 'failed';\n  metadata?: {\n    songId: string;\n    eventId: string;\n    songTitle?: string;\n  };\n}\n\ninterface YocoPaymentResult {\n  transactionId: string;\n  chargeId: string;\n  status: 'succeeded' | 'failed';\n  amount: number;\n  currency: string;\n  errorMessage?: string;\n}\n\ninterface RefundData {\n  requestId: string;\n  amount: number;\n  reason?: string;\n  chargeId?: string;\n}\n\ninterface RefundResult {\n  refundId: string;\n  amount: number;\n  status: 'pending' | 'processing' | 'completed' | 'failed';\n  transactionId: string;\n  estimatedDays: string;\n}\n\nlet yocoSDKInstance: any = null;\nlet yocoSDKLoading: Promise<void> | null = null;\n\nasync function loadYocoSDK(): Promise<void> {\n  if (yocoSDKInstance) return;\n  \n  if (yocoSDKLoading) {\n    await yocoSDKLoading;\n    return;\n  }\n  \n  yocoSDKLoading = new Promise((resolve, reject) => {\n    if (window.YocoSDK) {\n      try {\n        yocoSDKInstance = new window.YocoSDK({\n          publicKey: YOCO_PUBLIC_KEY,\n        });\n        resolve();\n      } catch (error) {\n        reject(new Error('Failed to initialize Yoco SDK'));\n      }\n      return;\n    }\n    \n    const script = document.createElement('script');\n    script.src = 'https://js.yoco.com/sdk/v1/yoco-sdk-web.js';\n    script.async = true;\n    \n    script.onload = () => {\n      if (window.YocoSDK) {\n        try {\n          yocoSDKInstance = new window.YocoSDK({\n            publicKey: YOCO_PUBLIC_KEY,\n          });\n          resolve();\n        } catch (error) {\n          reject(new Error('Failed to initialize Yoco SDK'));\n        }\n      } else {\n        reject(new Error('Yoco SDK not available'));\n      }\n    };\n    \n    script.onerror = () => reject(new Error('Failed to load Yoco SDK'));\n    document.body.appendChild(script);\n  });\n  \n  await yocoSDKLoading;\n}\n\nexport async function createPaymentIntent(data: PaymentIntentData): Promise<PaymentIntent> {\n  console.log('≡ƒÆ│ Creating payment intent:', data);\n  \n  await loadYocoSDK();\n  \n  const intent: PaymentIntent = {\n    intentId: `pi_${Date.now()}_${crypto.randomUUID().substring(0, 8)}`,\n    amount: data.amount,\n    currency: data.currency || 'ZAR',\n    status: 'pending',\n    metadata: {\n      songId: data.songId,\n      eventId: data.eventId,\n      songTitle: data.songTitle,\n    },\n  };\n  \n  return intent;\n}\n\nexport async function processYocoPayment(intent: PaymentIntent): Promise<YocoPaymentResult> {\n  console.log('ΓÜí Processing Yoco payment:', intent);\n  \n  await loadYocoSDK();\n  \n  if (!yocoSDKInstance) {\n    throw new Error('Payment system not initialized. Please refresh and try again.');\n  }\n  \n  return new Promise((resolve, reject) => {\n    yocoSDKInstance.showPopup({\n      amountInCents: Math.round(intent.amount * 100),\n      currency: intent.currency || 'ZAR',\n      name: 'BeatMatchMe',\n      description: intent.metadata?.songTitle \n        ? `Song Request: ${intent.metadata.songTitle}`\n        : 'Song Request Payment',\n      callback: (result: any) => {\n        if (result.error) {\n          console.error('Γ¥î Yoco payment error:', result.error);\n          reject(new Error(result.error.message || 'Payment failed'));\n          return;\n        }\n        \n        if (result.id) {\n          console.log('Γ£à Yoco payment successful, charge ID:', result.id);\n          resolve({\n            transactionId: result.id,\n            chargeId: result.id,\n            status: 'succeeded',\n            amount: intent.amount,\n            currency: intent.currency,\n          });\n        } else {\n          reject(new Error('Payment failed - no charge ID received'));\n        }\n      },\n    });\n  });\n}\n\nexport async function verifyPayment(chargeId: string): Promise<boolean> {\n  console.log('≡ƒöì Verifying payment:', chargeId);\n  \n  try {\n    const verifyQuery = `\n      query VerifyPayment($chargeId: String!) {\n        verifyPayment(chargeId: $chargeId) {\n          valid\n          status\n          amount\n        }\n      }\n    `;\n    \n    const response: any = await client.graphql({\n      query: verifyQuery,\n      variables: { chargeId }\n    });\n    \n    return response.data?.verifyPayment?.valid === true;\n  } catch (error) {\n    console.error('Payment verification error:', error);\n    return false;\n  }\n}\n\nexport async function processRefund(data: RefundData): Promise<RefundResult> {\n  console.log('≡ƒÆ╕ Processing refund:', data);\n  \n  const refundMutation = `\n    mutation ProcessRefund($requestId: ID!, $reason: String) {\n      processRefund(requestId: $requestId, reason: $reason) {\n        refundId\n        amount\n        status\n        transactionId\n        estimatedDays\n        refundedAt\n      }\n    }\n  `;\n  \n  try {\n    const response: any = await client.graphql({\n      query: refundMutation,\n      variables: {\n        requestId: data.requestId,\n        reason: data.reason || 'Request cancelled',\n      }\n    });\n    \n    const result = response.data?.processRefund;\n    \n    if (!result) {\n      throw new Error('Refund processing failed - no response from server');\n    }\n    \n    console.log('Γ£à Refund processed:', result);\n    \n    return {\n      refundId: result.refundId,\n      amount: result.amount,\n      status: result.status === 'COMPLETED' ? 'completed' : 'pending',\n      transactionId: result.transactionId,\n      estimatedDays: result.estimatedDays || '5-10 business days',\n    };\n  } catch (error: any) {\n    console.error('Γ¥î Refund failed:', error);\n    throw new Error(error.message || 'Refund failed. Please contact support.');\n  }\n}\n\n/**\n * Check if an error is retryable\n */\nexport function isRetryableError(error: any): boolean {\n  if (!error) return false;\n  \n  const retryableMessages = [\n    'network',\n    'timeout',\n    'ECONNRESET',\n    'ETIMEDOUT',\n    'ENOTFOUND',\n    '502',\n    '503',\n    '504',\n  ];\n  \n  const errorMessage = error.message?.toLowerCase() || '';\n  return retryableMessages.some(msg => errorMessage.includes(msg.toLowerCase()));\n}\n\n/**\n * CRITICAL FIX: Poll payment status with exponential backoff\n * Handles network delays and async payment processing\n * \n * @param transactionId - The transaction ID to poll\n * @param maxAttempts - Maximum polling attempts (default: 10)\n * @returns Payment status or throws after max attempts\n */\nexport async function verifyPaymentStatus(\n  transactionId: string,\n  maxAttempts: number = 10\n): Promise<'succeeded' | 'failed' | 'pending'> {\n  console.log(`≡ƒöä Starting payment verification polling for ${transactionId}`);\n  \n  const getTransactionQuery = /* GraphQL */ `\n    query GetTransaction($transactionId: ID!) {\n      getTransaction(transactionId: $transactionId) {\n        transactionId\n        amount\n        status\n        paymentMethod\n        providerTransactionId\n        failureReason\n        createdAt\n        updatedAt\n      }\n    }\n  `;\n  \n  let attempt = 0;\n  let delay = 1000; // Start with 1 second\n  \n  while (attempt < maxAttempts) {\n    attempt++;\n    \n    try {\n      console.log(`≡ƒôí Payment status poll attempt ${attempt}/${maxAttempts} (delay: ${delay}ms)`);\n      \n      // Query Transactions table via AppSync\n      const response: any = await client.graphql({\n        query: getTransactionQuery,\n        variables: { transactionId }\n      });\n      \n      const transaction = response.data?.getTransaction;\n      \n      if (!transaction) {\n        console.warn(`ΓÜá∩╕Å Transaction ${transactionId} not found (attempt ${attempt})`);\n        \n        // If transaction not found after 5 attempts, it likely doesn't exist\n        if (attempt >= 5) {\n          throw new Error('Transaction not found in database');\n        }\n      } else {\n        const status = transaction.status;\n        console.log(`≡ƒôè Transaction status: ${status} (attempt ${attempt})`);\n        \n        // Terminal states - return immediately\n        if (status === 'succeeded' || status === 'completed') {\n          console.log(`Γ£à Payment verified as succeeded after ${attempt} attempts`);\n          return 'succeeded';\n        }\n        \n        if (status === 'failed' || status === 'refunded') {\n          console.error(`Γ¥î Payment failed/refunded: ${transaction.failureReason || 'Unknown reason'}`);\n          return 'failed';\n        }\n        \n        // Still processing\n        console.log(`ΓÅ│ Payment still processing (status: ${status})`);\n      }\n      \n      // Wait before next attempt (exponential backoff: 1s ΓåÆ 2s ΓåÆ 4s ΓåÆ 8s ΓåÆ 16s ΓåÆ 30s cap)\n      if (attempt < maxAttempts) {\n        await new Promise(resolve => setTimeout(resolve, delay));\n        delay = Math.min(delay * 2, 30000); // Cap at 30 seconds\n      }\n      \n    } catch (error) {\n      console.error(`Γ¥î Error polling payment status (attempt ${attempt}):`, error);\n      \n      // If final attempt, rethrow error\n      if (attempt >= maxAttempts) {\n        throw new Error(`Payment verification failed after ${maxAttempts} attempts: ${error}`);\n      }\n      \n      // Wait before retry\n      await new Promise(resolve => setTimeout(resolve, delay));\n      delay = Math.min(delay * 2, 30000);\n    }\n  }\n  \n  // Max attempts reached without terminal status\n  console.error(`ΓÅ▒∩╕Å Payment verification timed out after ${maxAttempts} attempts`);\n  return 'pending'; // Return pending instead of throwing (graceful degradation)\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\paymentSplit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\rateLimiter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\spotify.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\services\\subscriptions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\test\\setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\theme\\tokens.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\types\\common.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\types\\yoco.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\utils\\debugLogger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\utils\\eventCache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\utils\\gradients.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\utils\\graphqlWrapper.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\utils\\haptics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\utils\\instanceTracker.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\utils\\preventPullToRefresh.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\utils\\telemetry.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\utils\\themeClassMigration.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\nathi\\Downloads\\BeatMatchMe\\web\\src\\utils\\validateBackend.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
